@import "tailwindcss";

:root {
  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
}

body {
  margin: 0;
  /* IMPORTANT: remove app-level centering that squashes UI */
  min-width: 320px;
  min-height: 100vh;
}

#root {
  width: 100%;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #E5E7EB;
  border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #D1D5DB;
}

/* ===== 320px BREAKPOINT-SPECIFIC FIXES ===== */
/* These styles only apply at widths 319px-374px to fix overflow and clipping issues */
@media (max-width: 374px) {

  /* Header: Reduce time display and language selector sizes */
  .header-320-compact .time-display {
    font-size: 9px !important;
    padding: 2px 6px !important;
  }

  /* Sidebar: Reduce width for 320px */
  .sidebar-320 {
    width: 220px !important;
  }

  /* GPS Page: Auto-tracking label text */
  .gps-auto-tracking-label {
    font-size: 8px !important;
    max-width: 80px;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* GPS Page: Reduce button sizes */
  .gps-control-btn-320 {
    padding: 4px 8px !important;
    font-size: 9px !important;
  }

  /* Status Cards: Smaller text and tighter spacing */
  .status-card-320 .status-label {
    font-size: 8px !important;
    line-height: 1.1 !important;
  }

  .status-card-320 .status-sub {
    font-size: 8px !important;
  }

  /* Patient Filter Bar: Status cards grid tighter */
  .filter-status-cards-320 {
    gap: 4px !important;
  }

  .filter-status-card-320 {
    padding: 4px !important;
  }

  .filter-status-card-320 .label-text {
    font-size: 7px !important;
    letter-spacing: 0 !important;
  }

  /* Notification Log: Pagination text smaller */
  .pagination-text-320 {
    font-size: 10px !important;
  }

  /* Settings: Buttons fit in card */
  .settings-btn-row-320 button {
    padding: 6px 12px !important;
    font-size: 12px !important;
  }

  /* Patient Overview Table: Fit content better */
  .patient-card-320 .date-row {
    white-space: nowrap;
    font-size: 11px !important;
  }

  /* Sleep Page: Session summary title */
  .session-title-320 {
    font-size: 14px !important;
  }

  /* Sleep Page: Back button positioning */
  .sleep-back-btn-320 {
    left: 8px !important;
    top: 8px !important;
    width: 32px !important;
    height: 32px !important;
  }
}

/* Emergency Alert Toast Animations */
@keyframes custom-enter {
  0% {
    transform: translateX(110%) scale(0.9);
    opacity: 0;
  }

  100% {
    transform: translateX(0) scale(1);
    opacity: 1;
  }
}

@keyframes custom-leave {
  0% {
    transform: translateX(0) scale(1);
    opacity: 1;
  }

  100% {
    transform: translateX(20px) scale(0.95);
    opacity: 0;
  }
}

@keyframes progress-shrink {
  0% {
    width: 100%;
  }

  100% {
    width: 0%;
  }
}

.animate-custom-enter {
  animation: custom-enter 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

.animate-custom-leave {
  animation: custom-leave 0.3s ease-in forwards;
}

.animate-progress-shrink {
  animation: progress-shrink 4.5s linear forwards;
}

/* ===== LEAFLET MAP STABILIZATION ===== */
/* Comprehensive fixes for tile rendering glitches, white/green blocks, and washed-out areas */
/* Root cause: Parent scaling transform from ResponsiveScaleShell interferes with tile compositing */

/* Map wrapper - create independent stacking context to isolate from parent transforms */
.gps-map-wrapper {
  /* contain: strict creates independent layout and paint context */
  contain: layout style paint;
  /* Backup: filter trick also creates stacking context */
  filter: brightness(1);
  /* Prevent inherited transforms from affecting tiles */
  transform-style: flat;
}

/* Base container - solid background prevents flash-through */
.leaflet-container {
  background: #e5e7eb !important;
  outline: none;
  -webkit-tap-highlight-color: transparent;
  /* Create own stacking context */
  isolation: isolate;
  /* Force hardware layer */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Tile pane - the critical layer for tile rendering */
.leaflet-tile-pane {
  /* Force its own compositing layer */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  /* Ensure no opacity inheritance issues */
  opacity: 1 !important;
}

/* Individual tiles - prevent rendering artifacts */
.leaflet-tile {
  /* Force independent rendering */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  /* Prevent subpixel rendering gaps */
  image-rendering: -webkit-optimize-contrast;
  /* Ensure tiles are fully opaque when loaded */
  opacity: 1 !important;
}

/* Loading tiles - prevent flash of incorrect state */
.leaflet-tile-loaded {
  opacity: 1 !important;
  visibility: visible !important;
}

/* Zoom animation layer - prevent ghost tiles during zoom */
.leaflet-zoom-animated {
  will-change: transform;
  -webkit-transform-style: preserve-3d;
  transform-style: preserve-3d;
}

/* Marker pane - separate from tiles to prevent interference */
.leaflet-marker-pane {
  z-index: 600 !important;
}

/* Overlay pane for popups */
.leaflet-popup-pane {
  z-index: 700 !important;
}

/* Prevent any filter effects from washing out tiles */
.leaflet-pane {
  filter: none !important;
}

/* Ensure shadow pane doesn't interfere */
.leaflet-shadow-pane {
  opacity: 1 !important;
}

/* Fix for tiles sometimes appearing washed out */
.leaflet-tile-container img {
  -webkit-filter: none !important;
  filter: none !important;
  opacity: 1 !important;
}

/* Prevent tile gaps during transitions */
.leaflet-fade-anim .leaflet-tile {
  transition: none !important;
}

/* Control containers - ensure proper z-index and visibility */
.leaflet-control-container {
  z-index: 800;
}

.leaflet-control-zoom {
  border: none !important;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15) !important;
  border-radius: 8px !important;
  overflow: hidden;
}

.leaflet-control-zoom a {
  background: white !important;
  color: #374151 !important;
  width: 32px !important;
  height: 32px !important;
  line-height: 32px !important;
  font-size: 18px !important;
}

.leaflet-control-zoom a:hover {
  background: #f3f4f6 !important;
}

/* ===== YOUR CONTAINER CLASS ===== */
@layer components {
  .align-elements {
    @apply max-w-[1700px] mx-auto px-2
  }
}